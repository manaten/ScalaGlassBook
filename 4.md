# クラスとオブジェクト

## この章のキーワード
- クラス宣言
  - アクセス修飾子
- メソッド
  - パラメータはval
  - return
  - Unit
- セミコロン推論
- シングルトン
  - コンパニオンオブジェクト
  - スタンドアロンオブジェクト

## クラス宣言
文法的な話。
```scala
class ChecksumAccumulator {
  var sum = 0
}
```

フィールド変数はインスタンスごとで独立、valで宣言したフィールドであっても、参照先が書き換えられうる、などの当たり前な話。

### アクセス修飾子
デフォルトはpublic。private修飾子をつけることで不可視にできる。
```scala
class ChecksumAccumulator {
  val sum = 0
}
```

privateなフィールドにアクセスできるのは、クラスメソッドだけという当たり前の話。

## メソッド
```scala
class ChecksumAccumulator {
  val sum = 0
  def add(b: Byte): Unit = {
    return sum + b
  }
  def checksum() :Int = {
    return ~(sum & 0xFF) + 1
  }
}
```

関数は最後に評価された値を返すのでreturnは省略でき、また単一式のメソッドは {} を省略できる。
以下のように簡潔に記述できる。

```scala
class ChecksumAccumulator {
  val sum = 0
  def add(b: Byte): Unit = sum + b
  def checksum() :Int = ~(sum & 0xFF) + 1
}
```

### Unit
Unit型のメソッド = 値を返さないメソッドは**副作用**を持つということである。

すべての型はUnitに変換可能であり、Unitに変換して返すということは戻り値はいらない、捨てるということ

```
def f() : Unit = "hoge"
```

また、統合なしの {} スタイルのメソッド宣言は、手続き型スタイルであり、型宣言なしでもUnitをかえす
```
def f() { "hoge" }
```

## セミコロン推論

基本的に推論してくれるのでセミコロンは不要。必要なのは、例えば一行に文を2つ書きたい場合。

```scala
val s = "hello"; println(s)
```

セミコロン推論は、以下のルールに当てはまらない場合、自動で行末にセミコン論があるものとしてくれる

> 1. 行末がピリオドや中置演算子などの、末尾になれない
> 2. 次の行が先頭として認められない単語
> 3. () [] の途中である。これらの中にはもともと複数分入れない。

